<!DOCTYPE html>
<html>
<head>
    <title>Analytics Hackaton!</title>
    <link href="public/styles/styles.css" media="all" rel="stylesheet" type="text/css"/>
</head>
<body>

<!-- Step 1: Create the containing elements. -->

<section id="auth-button"></section>
<section id="view-selector"></section>
<section id="timeline"></section>

<main class="container">
  <div class="row">
    <div class="col-md-12">
      <h1>Google Analytics Dashboard</h1>
    </div>
  </div>
  

  <div class="row">
    <div class="col-md-12">
      <div class="panel">
        <h2>Timeline</h2>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-4">
      <div class="panel">
        <h2>Real time</h2>
      </div>
    </div>
    <div class="col-md-4">
      <div class="panel">
        <h2>Yada yada</h2>
      </div>

    </div>
    <div class="col-md-4">
      <div class="panel">
        <h2>IE</h2>
      </div>

    </div>
  </div>

  
  


</main>


<!-- Step 2: Load the library. -->

<script>
    (function(w,d,s,g,js,fjs){
        g=w.gapi||(w.gapi={});g.analytics={q:[],ready:function(cb){this.q.push(cb)}};
        js=d.createElement(s);fjs=d.getElementsByTagName(s)[0];
        js.src='public/js/platform.js';
        fjs.parentNode.insertBefore(js,fjs);js.onload=function(){g.load('analytics')};
    }(window,document,'script'));
</script>

<script src="public/js/Chart.js"></script>
<script src="public/js/moment.js"></script>

<!-- Include the ViewSelector2 component script. -->
<script src="public/js/view-selector2.js"></script>

<!-- Include the DateRangeSelector component script. -->
<script src="public/js/date-range-selector.js"></script>

<script src="public/js/active-users.js"></script>

<script>
    gapi.analytics.ready(function() {

        var CLIENT_ID = 'INSERT';

        gapi.analytics.auth.authorize({
            container: 'auth-button',
            clientid: CLIENT_ID
        })

       // Step 4: Create the view selector.

       var viewSelector = new gapi.analytics.ViewSelector({
           container: 'view-selector'
       });

       // Step 5: Create the timeline chart.

       var timeline = new gapi.analytics.googleCharts.DataChart({
           reportType: 'ga',
           query: {
               'dimensions': 'ga:date',
               'metrics': 'ga:sessions',
               'start-date': '30daysAgo',
               'end-date': 'yesterday'
           },
           chart: {
               type: 'LINE',
               container: 'timeline'
           }
       });

       // Step 6: Hook up the components to work together.

       gapi.analytics.auth.on('success', function(response) {
           viewSelector.execute();
       });

       viewSelector.on('change', function(ids) {
           var newIds = {
               query: {
                   ids: ids
               }
           };
           timeline.set(newIds).execute();
       });
   });
</script>
</body>
</html>